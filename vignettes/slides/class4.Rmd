---
title: "Geospatial Analysis with R"
author: "Lyndon Estes & Zhiwen Zhu"
date: "9/6/2017"
output:
  slidy_presentation: default
  ioslides_presentation: default
subtitle: Class 4
---

```{r setup, include=FALSE}
# knitr::opts_chunk$set(echo = FALSE)
```

## Things to Cover Today

- Housekeeping
    - Checking in on assignment 1 
    - Assignment 2 almost done
    - Wednesday: will go over possible projects
- Your questions
- Key concepts/techniques

## Your questions

(send as slack message to Zhiwen if you prefer)

- What was least clear?

    - Method dispatch (object-oriented programming)
    - Name-masking (name-space)
    
- What seemed obvious/made most sense? 

## Key concepts/techniques

- Environments versus namespaces
    - Environments provide spaces for names
    - Namespace is the environment for a package: they keep functions in packages separate from one another 
    - The last package loaded provides the current environment
    - The Global Environment is where you work
    - Functions and environments: 

        From [Advanced R](http://adv-r.had.co.nz/Environments.html#function-envs)
"This works because every package has two environments associated with it: the package environment and the namespace environment. The package environment contains every publicly accessible function, and is placed on the search path. The namespace environment contains all functions (including internal functions), and its parent environment is a special imports environment that contains bindings to all the functions that the package needs. Every exported function in a package is bound into the package environment, but enclosed by the namespace environment. This complicated relationship is illustrated by the following diagram"

    - How does all this complicated mess matter to you?
        - Understanding interactions between functions and objects you are working within the global environment 
        - Interactions between functions of the same name from different packages

## Key concepts continued

- Base types, S3, S4


## Examples

## R concepts - Namespaces

The last package loaded Notice how the order in which packages are loaded can matter as to which functions are in the search path. 
```{r}
library(raster)
library(Hmisc)

mask

detach("package:raster", unload=TRUE)
detach("package:Hmisc", unload=TRUE)
library(Hmisc)
library(raster)

mask

```


## R concepts - Environments

```{r}
a <- 1:10

b <- function(x) {
  a <- x * 100
  return(a)  
}
a

b2 <- function(x) {
  a <- x * 100
}
a

```

Run function b with the values of a
```{r} 
b(a)
```

And check the value of `a` again
```{r} 
a
```

```{r}
b2(a)
```
 Nothing produced! (We didn't return it to the global environment)
 
```{r}
o <- b2(a)
return(o)
```


## Knitting Rmd docs

Knitr fails to knit html when errors crop in code. Sometimes you might want the errors to be printed in your html. Use error = TRUE in \```{r, error = TRUE}\

```{r, error = TRUE}
a <- "a"
sum(a)

```




