---
title: "Geospatial Analysis with R"
author: "Lyndon Estes & Zhiwen Zhu"
date: "9/6/2017"
output:
  slidy_presentation: default
  ioslides_presentation: default
subtitle: Class 2
---

```{r setup, include=FALSE}
# knitr::opts_chunk$set(echo = FALSE)
```

## Things to Cover Today

- Housekeeping
    - Campus R/Rstudio installs (library 3rd floor or room 107)?
- Progress thus far
    - Able to build package?
    - Create private repo under your own sub-team of the geo246346 team on  [agroimpacts](https://github.com/agroimpacts)?
    - Commit your package to git and your repo on GitHub?
- Your questions
- Key concepts/techniques

## Your questions

(send as slack message to Zhiwen if you prefer)

- What was least clear?
    - install, install_github, install.packages [differences]
    - easy way to use vignettes? intended uses of vignettes
    - working with chunks and knitting
        - Remember chunk options--they determine whether code is evaluated, presented, and/or displayed at knit time
    - when to use vignettes
        - vignettes can have a numbered TOC, but you have to pass additional commands to the `yaml` front matter (see example posted in slack)
- What seemed obvious/made most sense? 

## Key concepts/techniques

- An example of a [paper](https://github.com/agroimpacts/croplandbias) as an R package
- Downsides to `markdown` (upsides to Word)
- R concepts 
    - What is an object?
        - Different types of objects? (functions/operators; data; results)
    - Data types and data structures
    - Code style
    - Documentation (export, imports, depends, vignettes)
    - Namespaces

## Examples

Rmarkdown

## Now you see the code and plot
```{r}
data("cars")
plot(cars$speed, cars$dist)
```

## Now you don't (see the code)
```{r, echo = FALSE}
data("cars")
plot(cars$speed, cars$dist)
```

## Now you don't (see the plot)
```{r, eval = FALSE}
data("cars")
plot(cars$speed, cars$dist)
```

## R concepts - Factors

```{r}
a <- as.factor(1:10)
levels(a)
a * 10


# R typically coerces characters to factors
b <- letters[1:10]
str(b)
DF <- cbind.data.frame(b, d = 1:10)
str(DF)

options(stringsAsFactors = FALSE)
DF <- cbind.data.frame(b, 1:10)
str(DF)

DF$b <- as.factor(DF$b)
str(DF)

options(stringsAsFactors = TRUE)
DF <- cbind.data.frame(b, 1:10)
str(DF)


```

## R concepts - matrix and list
```{r}
cbind(b, 1:10)  # all one data type
list(1:10, letters, plot(1:10))  # lists hold multiple data types
```


## R concepts - Namespaces

Notice how the order in which packages are loaded can matter as to which functions are in the search path. 
```{r}
library(raster)
library(Hmisc)

mask

detach("package:raster", unload=TRUE)
detach("package:Hmisc", unload=TRUE)
library(Hmisc)
library(raster)

mask

```

## R concepts - Environments

For Monday
```{r}
a <- 1:10

b <- function(x) {
  a <- x * 100
  return(a)  
}
a
```

Run function b with the values of a
```{r} 
b(a)
```

And check the value of `a` again
```{r} 
a
```




